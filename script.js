const questions = [

/* ================= PART 1 : MCQ ================= */

{
  type: "mcq",
  q: "Management is the art of securing maximum prosperity with a ________ of effort.",
  options: ["Maximum", "Minimum", "Equal", "Complex"],
  a: 1
},
{
  type: "mcq",
  q: "Which of the following is NOT one of the four primary resources mentioned in the text?",
  options: ["Human resources", "Financial resources", "Technological resources", "Information resources"],
  a: 2
},
{
  type: "mcq",
  q: "According to Koontz and O'Donnel, management is the task of:",
  options: ["Achieving personal goals", "Getting things done through others", "Controlling physical resources only", "Managing time"],
  a: 1
},
{
  type: "mcq",
  q: "Which management level is responsible for establishing policies and objectives?",
  options: ["Lower Level", "Middle Level", "Top Level", "Staff Level"],
  a: 2
},
{
  type: "mcq",
  q: "A Nursing Supervisor is typically classified under which level?",
  options: ["Top Level", "Middle Level", "Lower Level", "Executive Level"],
  a: 1
},
{
  type: "mcq",
  q: "The Scalar Chain principle refers to:",
  options: ["The salary scale", "The line of authority from top to bottom", "The equipment maintenance cycle", "The production line"],
  a: 1
},
{
  type: "mcq",
  q: "The ability to analyze and diagnose a situation is known as:",
  options: ["Technical skill", "Human skill", "Conceptual skill", "Mechanical skill"],
  a: 2
},
{
  type: "mcq",
  q: "Which function of management involves matching jobs with individuals?",
  options: ["Planning", "Organizing", "Staffing", "Controlling"],
  a: 2
},
{
  type: "mcq",
  q: "Unity of Command means that an employee should receive orders from:",
  options: ["All managers", "Only one superior", "Two or more supervisors", "The CEO only"],
  a: 1
},
{
  type: "mcq",
  q: "The principle of Division of Work leads to:",
  options: ["Confusion", "Specialization", "Lack of responsibility", "Lower productivity"],
  a: 1
},
{
  type: "mcq",
  q: "Which level of management acts as an intermediary?",
  options: ["Senior management", "First-line management", "Middle management", "Board of Directors"],
  a: 2
},
{
  type: "mcq",
  q: "The Head-nurse belongs to which level of management?",
  options: ["Top Level", "Middle Level", "Lower/First Level", "Advisory Level"],
  a: 2
},
{
  type: "mcq",
  q: "Esprit de Corps is another term for:",
  options: ["Individual initiative", "Team spirit", "Discipline", "Centralization"],
  a: 1
},
{
  type: "mcq",
  q: "Which function involves monitoring performance and corrective action?",
  options: ["Planning", "Directing", "Controlling", "Organizing"],
  a: 2
},
{
  type: "mcq",
  q: "Management is considered an Art because it requires:",
  options: ["Organized knowledge", "Personal skills and creativity", "Constant experimentation", "Scientific laws"],
  a: 1
},
{
  type: "mcq",
  q: "The principle of Equity states that:",
  options: ["Same salaries", "Equal human rights", "Centralized authority", "No supervisors"],
  a: 1
},
{
  type: "mcq",
  q: "Which resource is listed under Work Procedures?",
  options: ["Money", "Machinery", "Knowledge and skills", "Raw materials"],
  a: 2
},
{
  type: "mcq",
  q: "Unity of Direction means:",
  options: ["One boss", "One plan for same objectives", "Different directions", "No orders"],
  a: 1
},
{
  type: "mcq",
  q: "The skill equally important at all management levels is:",
  options: ["Technical", "Human", "Conceptual", "Financial"],
  a: 1
},
{
  type: "mcq",
  q: "Management is a Universal Process because:",
  options: ["Used only in hospitals", "Applied in all organized efforts", "Very old science", "Only in big companies"],
  a: 1
},
{
  type: "mcq",
  q: "Which is a cause of management failure?",
  options: ["High trust", "Effective communication", "Lack of accountability", "Clear goals"],
  a: 2
},
{
  type: "mcq",
  q: "Job security increases productivity refers to:",
  options: ["Remuneration", "Stability of tenure", "Order", "Discipline"],
  a: 1
},
{
  type: "mcq",
  q: "Identifying and classifying work is part of:",
  options: ["Planning", "Staffing", "Organizing", "Directing"],
  a: 2
},
{
  type: "mcq",
  q: "Providing motivation and leadership is:",
  options: ["Controlling", "Directing", "Planning", "Staffing"],
  a: 1
},
{
  type: "mcq",
  q: "Paralysis by analysis refers to:",
  options: ["Toxic culture", "Slow decision making", "Lack of skills", "Over communication"],
  a: 1
},

/* ================= PART 2 : TRUE / FALSE ================= */

{ type: "tf", q: "Management is the process of achieving goals using resources effectively.", a: true },
{ type: "tf", q: "Without management, resources alone guarantee success.", a: false },
{ type: "tf", q: "Top management is the ultimate source of authority.", a: true },
{ type: "tf", q: "Technical skills are more important for top managers.", a: false },
{ type: "tf", q: "Remuneration should be based on job difficulty.", a: true },
{ type: "tf", q: "Centralization means sharing decision making.", a: false },
{ type: "tf", q: "Discipline means obeying organizational rules.", a: true },
{ type: "tf", q: "Scalar chain can never be broken.", a: false },
{ type: "tf", q: "Planning is deciding in advance.", a: true },
{ type: "tf", q: "Management is purely a science.", a: false },
{ type: "tf", q: "Order includes social and material arrangement.", a: true },
{ type: "tf", q: "Accountability flows downward.", a: false },
{ type: "tf", q: "Toxic culture may lead to burnout.", a: true },
{ type: "tf", q: "Human skills mean working well with others.", a: true },
{ type: "tf", q: "Staffing only means firing employees.", a: false },

/* ================= PART 3 : CRITICAL THINKING ================= */

{
  type: "mcq",
  q: "Best resources but poor results indicate lack of:",
  options: ["Financial resources", "Physical resources", "Management", "Information"],
  a: 2
},
{
  type: "mcq",
  q: "A CEO solving technical IT problems shows failure of:",
  options: ["Human skills", "Conceptual skills", "Stability of tenure", "Remuneration"],
  a: 1
},
{
  type: "mcq",
  q: "Receiving orders from nurse and doctor violates:",
  options: ["Unity of Direction", "Unity of Command", "Division of Work", "Scalar Chain"],
  a: 1
},
{
  type: "mcq",
  q: "Which function bridges present and future?",
  options: ["Organizing", "Planning", "Controlling", "Staffing"],
  a: 1
},
{
  type: "mcq",
  q: "Lack of accountability leads to:",
  options: ["More initiative", "Failure without consequences", "Better team spirit", "More centralization"],
  a: 1
},
{
  type: "mcq",
  q: "Instability of tenure causes:",
  options: ["Loss of expertise", "No decisions", "Rigidity", "Higher cost only"],
  a: 0
},
{
  type: "mcq",
  q: "Conceptual skills are critical at top level because:",
  options: ["Handle equipment", "See organization as a whole", "Talk to patients", "Handle payroll"],
  a: 1
},
{
  type: "mcq",
  q: "One head and one plan means:",
  options: ["Unity of Command", "Unity of Direction", "Centralization", "Equity"],
  a: 1
},
{
  type: "mcq",
  q: "Right person but no follow-up misses:",
  options: ["Staffing", "Planning", "Controlling", "Organizing"],
  a: 2
},
{
  type: "mcq",
  q: "Anything minus management equals nothing means management is:",
  options: ["Secondary", "Multiplier of resources", "Only for large firms", "Waste of time"],
  a: 1
}

];

console.log(questions.length); 
let index = 0;
let answers = Array(questions.length).fill(null);
let reviewMode = false;
let shuffledQuestions = [];
/* ========= ELEMENTS ========= */

const qText = document.getElementById("questionText");
const optionsDiv = document.getElementById("options");
const counter = document.getElementById("counter");
const progress = document.getElementById("progressBar");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("result");
const resultScore = document.getElementById("resultScore");
const resultPercent = document.getElementById("resultPercent");
/* ========= OPTIONS ========= */
function shuffleOptions(arr) {
  const array = [...arr];
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
function createOption(text, isCorrect) {
  const b = document.createElement("button");
  b.innerText = text;
  b.onclick = () => select(isCorrect, b);
  optionsDiv.appendChild(b);
}
function select(isCorrect, btn) {
  if (answers[index] !== null) return;

  answers[index] = isCorrect;

  const q = shuffledQuestions[index];

  [...optionsDiv.children].forEach(b => {
    b.disabled = true;

    // لو MCQ
    if (q.type === "mcq") {
      const correctText = q.options[q.a];

      if (b.innerText === correctText) {
        b.style.background = "#27ae60"; // الصح أخضر
      } else if (b === btn) {
        b.style.background = "#e74c3c"; // الغلط أحمر
      }
    }

    // لو True / False
    if (q.type === "tf") {
      if (
        (b.innerText === "True" && q.a === true) ||
        (b.innerText === "False" && q.a === false)
      ) {
        b.style.background = "#27ae60";
      } else if (b === btn) {
        b.style.background = "#e74c3c";
      }
    }
  });

  nextBtn.style.display = "inline-block";
}
function startQuiz() {
  index = 0;
  answers = Array(questions.length).fill(null);
  reviewMode = false;

  // ✅ اعمل نسخة بدل ما تغيّر الأصل
  shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
document.getElementById("questionsBtn").innerText =
  `Questions (${shuffledQuestions.length})`;
  document.getElementById("result").classList.remove("show");
  document.getElementById("home").style.display = "none";
  document.getElementById("quiz").style.display = "block";

  loadQuestion();
}
function loadQuestion() {
  optionsDiv.innerHTML = "";
  nextBtn.style.display = "none";

  const q = shuffledQuestions[index];
  qText.innerText = q.q;
  counter.innerText = `Question ${index + 1} / ${shuffledQuestions.length}`;
  progress.style.width = ((index + 1) / shuffledQuestions.length) * 100 + "%";

  if (q.type === "tf") {
    createOption("True", q.a === true);
createOption("False", q.a === false);
  } else {
    const options = q.options.map((text, i) => ({
  text,
  correct: i === q.a
}));

shuffleOptions(options).forEach(opt => {
  createOption(opt.text, opt.correct);
});
  }
}

function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz() {
  const score = answers.filter(a => a === true).length;
  const percent = Math.round((score / questions.length) * 100);

  // اخفي الكويز
  document.getElementById("quiz").style.display = "none";

  // النصوص
  resultScore.innerText = `Score: ${score} / ${questions.length}`;
  resultPercent.innerText = `Percentage: ${percent}%`;

  let title = "";
  if (percent >= 85) {
    title = "اول دفعععهه يعمممم";
  } else if (percent >= 70) {
    title = "شد شويه يعممم";
  } else {
    title = "انت اخرك تخش كليه البهاييييمممم";
  }

  document.getElementById("resultTitle").innerText = title;

  // أظهر النتيجة بالأنيميشن
  resultBox.classList.add("show");
}
function restartQuiz() {
  document.getElementById("result").classList.remove("show");
  startQuiz();
}
function toggleQuestions() {
  const list = document.getElementById("questionsList");
  list.classList.toggle("show");
  renderQuestionsList();
}

function renderQuestionsList() {
  const list = document.getElementById("questionsList");
  list.innerHTML = "";

  shuffledQuestions.forEach((q, i) => {
    const b = document.createElement("button");
    b.innerText = i + 1;

    if (answers[i] === null) {
      b.className = "q-unanswered";
    } else if (answers[i] === true) {
      b.className = "q-correct";
    } else {
      b.className = "q-wrong";
    }

    if (i === index) {
      b.style.outline = "3px solid #3498db";
    }

    b.onclick = () => {
      index = i;
      loadQuestion();
      renderQuestionsList();
    };

    list.appendChild(b);
  });
}
/* ========= MENU ========= */

const sideMenu = document.getElementById("sideMenu");
const overlay = document.getElementById("overlay");

function toggleMenu() {
  sideMenu.classList.toggle("show");
  overlay.classList.toggle("show");
}

function closeMenu() {
  sideMenu.classList.remove("show");
  overlay.classList.remove("show");
}

/* ========= DARK MODE ========= */

function toggleDark() {
  document.body.classList.toggle("dark");
}
